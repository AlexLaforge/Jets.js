!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):a.Jets=b()}(this,function(){"use strict";function a(b){if(!(this instanceof a))return new a(b);var c=this;["searchTag","contentTag"].forEach(function(a){var d=a.replace("Tag",""),e="querySelector"+("contentTag"==a?"All":"");if(c[d+"_tag"]=document[e](b[a]),c[d+"_param"]=b[a],!c[d+"_tag"])throw new Error("Error! Could not find "+a+" element")});var d={searchSelector:"*AND",diacriticsMap:{}};if(c.options={},["disableListeners","columns","addImportant","searchSelector","manualContentHandling","diacriticsMap","didSearch","invert"].forEach(function(a){c.options[a]=b[a]||d[a]}),this.options.searchSelector.length>1){var e=c.options.searchSelector.trim();c.options.searchSelector=e.substr(0,1),c.options.searchSelectorMode=e.substr(1).toUpperCase()}var f,g=function(){f!=(f=c.search_tag.value)&&(c._applyCSS(),c.options.didSearch&&c.options.didSearch(c.search_tag.value))};c.search=g,c._onSearch=function(a){return"keydown"==a.type?setTimeout(g,0):void g()},c.destroy=function(){c._processEventListeners("remove"),c._destroy()},c.options.disableListeners||c._processEventListeners("add"),c._addStyleTag(),c._setJets(),c._applyCSS()}return a.prototype={constructor:a,_processEventListeners:function(a){["input","keydown","change"].forEach(function(b){this.search_tag[a+"EventListener"](b,this._onSearch)}.bind(this))},_applyCSS:function(){for(var a=this.replaceDiacritics(this.search_tag.value.trim().toLowerCase().replace(/\s\s+/g," ")),b=this.options.searchSelectorMode?a.split(" ").filter(function(a,b,c){return c.indexOf(a)==b}):[a],c="AND"==this.options.searchSelectorMode,d=[],e=0,f=b.length;f>e;e++)d.push((c?this.content_param+">":"")+(this.options.invert?"":":not(")+"[data-jets"+this.options.searchSelector+'="'+b[e]+'"]'+(this.options.invert?"":")"));var g=(c?"":this.content_param+">")+d.join(c?",":"")+"{display:none"+(this.options.addImportant?"!important":"")+"}";this.styleTag.innerHTML=a.length?g:""},_addStyleTag:function(){this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)},_getText:function(a){return a&&(a.textContent||a.innerText)||""},_getContentTags:function(a){return Array.prototype.slice.call(this.content_tag).reduce(function(b,c){return b.concat(Array.prototype.slice.call(c.querySelectorAll(a||":scope > *")))},[])},_setJets:function(a,b){for(var e,g,c=this,d=c._getContentTags(b?"":a),f=0;g=d[f];f++)(!g.hasAttribute("data-jets")||b)&&(e=this.options.manualContentHandling?this.options.manualContentHandling(g):c.options.columns&&c.options.columns.length?c.options.columns.map(function(a){return c._getText(g.children[a])}).join(" "):c._getText(g),g.setAttribute("data-jets",c.replaceDiacritics(e.trim().replace(/\s+/g," ").toLowerCase())))},replaceDiacritics:function(a){var b=this.options.diacriticsMap;for(var c in b)if(b.hasOwnProperty(c))for(var d=0,e=b[c].length;e>d;d++)a=a.replace(new RegExp(b[c][d],"g"),c);return a},update:function(a){this._setJets(":scope > :not([data-jets])",a)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);for(var c,a=this._getContentTags(),b=0;c=a[b];b++)c.removeAttribute("data-jets")}},function(a,b){try{a.querySelector(":scope body")}catch(c){["querySelector","querySelectorAll"].forEach(function(c){var d=b[c];b[c]=function(b){if(/(^|,)\s*:scope/.test(b)){var e=this.id;this.id="ID_"+Date.now(),b=b.replace(/((^|,)\s*):scope/g,"$1#"+this.id);var f=a[c](b);return this.id=e,f}return d.call(this,b)}})}}(window.document,Element.prototype),a});